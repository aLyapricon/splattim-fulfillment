import { Schedules } from '../entity/api/Schedules'
import { SalmonRunSchedules } from '../entity/api/SalmonRunSchedules'
import { Inventory } from '../entity/api/Gear'
import * as httpsPromise from '../common/httpsPromise'
import * as jsonPromise from '../common/jsonPromise'
import { config } from '../config'

export class Splatoon2inkApi {
    readSchedules(): Promise<Schedules> {
        // const dummyJSON: string = '{\"regular\":[{\"stage_a\":{\"id\":\"8\",\"image\":\"\/images\/stage\/96fd8c0492331a30e60a217c94fd1d4c73a966cc.png\",\"name\":\"Moray Towers\"},\"end_time\":1515679200,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"stage_b\":{\"id\":\"5\",\"image\":\"\/images\/stage\/fc23fedca2dfbbd8707a14606d719a4004403d13.png\",\"name\":\"Humpback Pump Track\"},\"id\":4780952683920800000,\"rule\":{\"key\":\"turf_war\",\"name\":\"Turf War\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515672000},{\"id\":4780952683920800000,\"stage_b\":{\"id\":\"13\",\"image\":\"\/images\/stage\/d9f0f6c330aaa3b975e572637b00c4c0b6b89f7d.png\",\"name\":\"MakoMart\"},\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"end_time\":1515686400,\"stage_a\":{\"name\":\"Snapper Canal\",\"id\":\"9\",\"image\":\"\/images\/stage\/8c95053b3043e163cbfaaf1ec1e5f3eb770e5e07.png\"},\"start_time\":1515679200,\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"}},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515686400,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515693600,\"stage_a\":{\"id\":\"11\",\"image\":\"\/images\/stage\/758338859615898a59e93b84f7e1ca670f75e865.png\",\"name\":\"Blackbelly Skatepark\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"The Reef\",\"image\":\"\/images\/stage\/98baf21c0366ce6e03299e2326fe6d27a7582dce.png\",\"id\":\"0\"}},{\"start_time\":1515693600,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"Starfish Mainstage\",\"image\":\"\/images\/stage\/187987856bf575c4155d021cb511034931d06d24.png\",\"id\":\"2\"},\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515700800,\"stage_a\":{\"id\":\"4\",\"image\":\"\/images\/stage\/5c030a505ee57c889d3e5268a4b10c1f1f37880a.png\",\"name\":\"Inkblot Art Academy\"}},{\"start_time\":1515700800,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"key\":\"turf_war\",\"name\":\"Turf War\"},\"id\":4780952683920800000,\"stage_b\":{\"id\":\"14\",\"image\":\"\/images\/stage\/65c99da154295109d6fe067005f194f681762f8c.png\",\"name\":\"Walleye Warehouse\"},\"end_time\":1515708000,\"stage_a\":{\"name\":\"Kelp Dome\",\"id\":\"10\",\"image\":\"\/images\/stage\/a12e4bf9f871677a5f3735d421317fbbf09e1a78.png\"},\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"}},{\"end_time\":1515715200,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"stage_a\":{\"id\":\"7\",\"image\":\"\/images\/stage\/0907fc7dc325836a94d385919fe01dc13848612a.png\",\"name\":\"Port Mackerel\"},\"stage_b\":{\"image\":\"\/images\/stage\/83acec875a5bb19418d7b87d5df4ba1e38ceac66.png\",\"id\":\"1\",\"name\":\"Musselforge Fitness\"},\"id\":4780952683920800000,\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515708000},{\"start_time\":1515715200,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"stage_b\":{\"image\":\"\/images\/stage\/bc794e337900afd763f8a88359f83df5679ddf12.png\",\"id\":\"3\",\"name\":\"Sturgeon Shipyard\"},\"id\":4780952683920800000,\"stage_a\":{\"image\":\"\/images\/stage\/070d7ee287fdf3c5df02411950c2a1ce5b238746.png\",\"id\":\"6\",\"name\":\"Manta Maria\"},\"end_time\":1515722400,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"}},{\"stage_a\":{\"name\":\"Humpback Pump Track\",\"image\":\"\/images\/stage\/fc23fedca2dfbbd8707a14606d719a4004403d13.png\",\"id\":\"5\"},\"end_time\":1515729600,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"stage_b\":{\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\",\"name\":\"Shellendorf Institute\"},\"id\":4780952683920800000,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515722400},{\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515729600,\"stage_a\":{\"name\":\"Moray Towers\",\"image\":\"\/images\/stage\/96fd8c0492331a30e60a217c94fd1d4c73a966cc.png\",\"id\":\"8\"},\"end_time\":1515736800,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"stage_b\":{\"name\":\"Shellendorf Institute\",\"id\":\"12\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\"},\"id\":4780952683920800000},{\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515744000,\"stage_a\":{\"id\":\"13\",\"image\":\"\/images\/stage\/d9f0f6c330aaa3b975e572637b00c4c0b6b89f7d.png\",\"name\":\"MakoMart\"},\"stage_b\":{\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\",\"name\":\"Shellendorf Institute\"},\"id\":4780952683920800000,\"rule\":{\"key\":\"turf_war\",\"name\":\"Turf War\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515736800},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515744000,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"end_time\":1515751200,\"stage_a\":{\"id\":\"4\",\"image\":\"\/images\/stage\/5c030a505ee57c889d3e5268a4b10c1f1f37880a.png\",\"name\":\"Inkblot Art Academy\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"Shellendorf Institute\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\"}},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515751200,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515758400,\"stage_a\":{\"id\":\"2\",\"image\":\"\/images\/stage\/187987856bf575c4155d021cb511034931d06d24.png\",\"name\":\"Starfish Mainstage\"},\"id\":4780952683920800000,\"stage_b\":{\"id\":\"12\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"name\":\"Shellendorf Institute\"}}],\"league\":[],\"gachi\":[]}'
        // const dummyJSON2: string = '{\"regular\":[{\"stage_a\":{\"id\":\"8\",\"image\":\"\/images\/stage\/96fd8c0492331a30e60a217c94fd1d4c73a966cc.png\",\"name\":\"Moray Towers\"},\"end_time\":1515679200,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"stage_b\":{\"id\":\"5\",\"image\":\"\/images\/stage\/fc23fedca2dfbbd8707a14606d719a4004403d13.png\",\"name\":\"Humpback Pump Track\"},\"id\":4780952683920800000,\"rule\":{\"key\":\"turf_war\",\"name\":\"Turf War\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515672000},{\"id\":4780952683920800000,\"stage_b\":{\"id\":\"13\",\"image\":\"\/images\/stage\/d9f0f6c330aaa3b975e572637b00c4c0b6b89f7d.png\",\"name\":\"MakoMart\"},\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"end_time\":1515686400,\"stage_a\":{\"name\":\"Snapper Canal\",\"id\":\"9\",\"image\":\"\/images\/stage\/8c95053b3043e163cbfaaf1ec1e5f3eb770e5e07.png\"},\"start_time\":1515679200,\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"}},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515686400,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515693600,\"stage_a\":{\"id\":\"11\",\"image\":\"\/images\/stage\/758338859615898a59e93b84f7e1ca670f75e865.png\",\"name\":\"Blackbelly Skatepark\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"The Reef\",\"image\":\"\/images\/stage\/98baf21c0366ce6e03299e2326fe6d27a7582dce.png\",\"id\":\"0\"}},{\"start_time\":1515693600,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"Starfish Mainstage\",\"image\":\"\/images\/stage\/187987856bf575c4155d021cb511034931d06d24.png\",\"id\":\"2\"},\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515700800,\"stage_a\":{\"id\":\"4\",\"image\":\"\/images\/stage\/5c030a505ee57c889d3e5268a4b10c1f1f37880a.png\",\"name\":\"Inkblot Art Academy\"}},{\"start_time\":1515700800,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"key\":\"turf_war\",\"name\":\"Turf War\"},\"id\":4780952683920800000,\"stage_b\":{\"id\":\"14\",\"image\":\"\/images\/stage\/65c99da154295109d6fe067005f194f681762f8c.png\",\"name\":\"Walleye Warehouse\"},\"end_time\":1515708000,\"stage_a\":{\"name\":\"Kelp Dome\",\"id\":\"10\",\"image\":\"\/images\/stage\/a12e4bf9f871677a5f3735d421317fbbf09e1a78.png\"},\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"}},{\"end_time\":1515715200,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"stage_a\":{\"id\":\"7\",\"image\":\"\/images\/stage\/0907fc7dc325836a94d385919fe01dc13848612a.png\",\"name\":\"Port Mackerel\"},\"stage_b\":{\"image\":\"\/images\/stage\/83acec875a5bb19418d7b87d5df4ba1e38ceac66.png\",\"id\":\"1\",\"name\":\"Musselforge Fitness\"},\"id\":4780952683920800000,\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515708000},{\"start_time\":1515715200,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"stage_b\":{\"image\":\"\/images\/stage\/bc794e337900afd763f8a88359f83df5679ddf12.png\",\"id\":\"3\",\"name\":\"Sturgeon Shipyard\"},\"id\":4780952683920800000,\"stage_a\":{\"image\":\"\/images\/stage\/070d7ee287fdf3c5df02411950c2a1ce5b238746.png\",\"id\":\"6\",\"name\":\"Manta Maria\"},\"end_time\":1515722400,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"}},{\"stage_a\":{\"name\":\"Humpback Pump Track\",\"image\":\"\/images\/stage\/fc23fedca2dfbbd8707a14606d719a4004403d13.png\",\"id\":\"5\"},\"end_time\":1515729600,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"stage_b\":{\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\",\"name\":\"Shellendorf Institute\"},\"id\":4780952683920800000,\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515722400},{\"rule\":{\"name\":\"Turf War\",\"key\":\"turf_war\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515729600,\"stage_a\":{\"name\":\"Moray Towers\",\"image\":\"\/images\/stage\/96fd8c0492331a30e60a217c94fd1d4c73a966cc.png\",\"id\":\"8\"},\"end_time\":1515736800,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"stage_b\":{\"name\":\"Shellendorf Institute\",\"id\":\"12\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\"},\"id\":4780952683920800000},{\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515744000,\"stage_a\":{\"id\":\"13\",\"image\":\"\/images\/stage\/d9f0f6c330aaa3b975e572637b00c4c0b6b89f7d.png\",\"name\":\"MakoMart\"},\"stage_b\":{\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\",\"name\":\"Shellendorf Institute\"},\"id\":4780952683920800000,\"rule\":{\"key\":\"turf_war\",\"name\":\"Turf War\",\"multiline_name\":\"Turf\\nWar\"},\"start_time\":1515736800},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515744000,\"game_mode\":{\"name\":\"Regular Battle\",\"key\":\"regular\"},\"end_time\":1515751200,\"stage_a\":{\"id\":\"4\",\"image\":\"\/images\/stage\/5c030a505ee57c889d3e5268a4b10c1f1f37880a.png\",\"name\":\"Inkblot Art Academy\"},\"id\":4780952683920800000,\"stage_b\":{\"name\":\"Shellendorf Institute\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"id\":\"12\"}},{\"rule\":{\"multiline_name\":\"Turf\\nWar\",\"name\":\"Turf War\",\"key\":\"turf_war\"},\"start_time\":1515751200,\"game_mode\":{\"key\":\"regular\",\"name\":\"Regular Battle\"},\"end_time\":1515758400,\"stage_a\":{\"id\":\"2\",\"image\":\"\/images\/stage\/187987856bf575c4155d021cb511034931d06d24.png\",\"name\":\"Starfish Mainstage\"},\"id\":4780952683920800000,\"stage_b\":{\"id\":\"12\",\"image\":\"\/images\/stage\/23259c80272f45cea2d5c9e60bc0cedb6ce29e46.png\",\"name\":\"Shellendorf Institute\"}}]}'
        // return jsonPromise.parse<Schedules>(dummyJSON)

        return httpsPromise.loadContent(config.splatoonInk.baseUrl + config.splatoonInk.data.schedules)
            .then(json => jsonPromise.parse<Schedules>(json))
    }

    readSalmonRunSchedules(): Promise<SalmonRunSchedules> {
        return httpsPromise.loadContent(config.splatoonInk.baseUrl + config.splatoonInk.data.coopSchedules)
            .then(json => jsonPromise.parse<SalmonRunSchedules>(json))
    }

    readMerchandise(): Promise<Inventory> {
        return httpsPromise.loadContent(config.splatoonInk.baseUrl + config.splatoonInk.data.merchandise)
            .then(json => jsonPromise.parse<Inventory>(json))
    }
}

export function getSplatnetResUrl(asset: string): string {
    return config.splatoonInk.baseUrl + config.splatoonInk.assets.splatnet + asset
}